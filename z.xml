<?xml version="1.0"?>
<codeTemplates><childs><node name="PHP" isFolder="True" hlType=""><data></data><childs><node name="e107" isFolder="True" hlType=""><data></data><childs><node name="admin_config" isFolder="True" hlType="PHP"><data>&lt;?php
/**
 * G4HDU Birthday Menu plugin
 *
 * Copyright (C) 2008-2016 Barry Keal G4HDU http://e107.keal.me.uk
 * weewxd under the terms and conditions of the
 * GNU General Public License (http://www.gnu.org/licenses/gpl.txt)
 *
 * @author Barry Keal e107@keal.me.uk&gt;
 * @copyright Copyright (C) 2008-2016 Barry Keal G4HDU
 * @license GPL
 * @version 1.0.0
 *
 * @todo
 */


// ***************************************************************
// *
// *		Plugin		:	Birthday Menu (e107 v2)
// *
// ***************************************************************
	require_once("../../class2.php");
if (!getperms("P")) { header("location:".e_BASE."index.php"); exit; }
e107::lan('birthday', 'admin', true);

class plugin_birthday_admin extends e_admin_dispatcher
{
	protected $modes = array(
		'main'		=&gt; array('controller' =&gt; 'plugin_birthday_admin_ui',
		'path' 		=&gt; null,
		'ui' 		=&gt; 'plugin_birthday_admin_form_ui', 'uipath' =&gt; null)
	);

	/**
	 *
	 * @var array
	 */
	protected $adminMenu = array(
		'main/prefs' 		=&gt; array('caption'=&gt; 'Settings', 'perm' =&gt; '0')
	);

	/**
	 * Optional, mode/action aliases, related with 'selected' menu CSS class
	 * Format: 'MODE/ACTION' =&gt; 'MODE ALIAS/ACTION ALIAS';
	 * This will mark active main/list menu item, when current page is main/edit
	 * @var array
	 */
	protected $adminMenuAliases = array(
		'main/edit'	=&gt; 'main/list'
	);

	/**
	 * Navigation menu title
	 * @var string
	 */
	protected $menuTitle = BIRTHDAY_ADMIN_NAME;
}



class plugin_birthday_admin_ui extends e_admin_ui
{

	protected $pluginTitle = BIRTHDAY_ADMIN_NAME;

	/**
	 * plugin name
	 *
	 * @var string
	 */
	protected $pluginName = 'birthday';
	/**
	 * Array containing a list of tabs to be displayed on the page
	 *
	 * @var array of strings
	 * @since 1.0.0
	 *
	 */
	protected $preftabs = array(
		0 =&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_TAB0,
		1 =&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_TAB1,
		2 =&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_TAB2,
		3 =&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_TAB3
	);

	protected $prefs = array(
		'birthday_numdue' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_NUMBERTOSHOW,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_NUMBERTOSHOW_HELP,
			'tab'=&gt;0,
			'type'=&gt;'number',
			'data'=&gt;'int',
			'writeParms'=&gt;array(
				'max'=&gt;20,
				'min'=&gt;1)
		),
		'birthday_dformat' =&gt; array(
			'title'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_FORMAT,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_FORMAT_HELP,
			'tab'=&gt;0,
			'type'=&gt;'dropdown',
			'data'=&gt;'int',
			'writeParms'=&gt;array(
				'0'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_FORMAT_LONG,
				'1'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_FORMAT_SHORT,
				'2'=&gt;'d M',
				'3'=&gt;'d M Y',
				'4'=&gt;'M d',
				'5'=&gt;'M d Y',
				'6'=&gt;'Y M d',
				'7'=&gt;'d mmm Y',
				'8'=&gt;'d MMM Y',
				'9'=&gt;'mmm d Y',
				'10'=&gt;'MMM d Y',
				'11'=&gt;'dth mmm Y',
				'12'=&gt;'dth MMM Y',
				'13'=&gt;'mmm dth Y',
				'14'=&gt;'MMM dth Y',
				'15'=&gt;'d mmm ',
				'16'=&gt;'d MMM ',
				'17'=&gt;'mmm d ',
				'18'=&gt;'MMM d ',
				'19'=&gt;'dth mmm ',
				'20'=&gt;'dth MMM ',
				'21'=&gt;'mmm dth ',
				'22'=&gt;'MMM dth ')
		),
		'birthday_showAge' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_AGE,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_AGE_HELP,
			'tab'=&gt;0,
			'type' =&gt; 'boolean',
			'data' =&gt; 'int'
		),
		'birthday_linkUser'=&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_LINK,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_LINK_HELP,
			'tab'=&gt;0,
			'type' =&gt; 'boolean',
			'data' =&gt; 'int'
		),
		'birthday_sendEmail' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_EMAIL,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_EMAIL_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'boolean',
			'data' =&gt; 'int'
		),
		'birthday_subject' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_SUBJECT,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_SUBJECT_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'text',
			'data' =&gt; 'str',
		),
		'birthday_emailfrom' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_EMAILFROM,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_EMAILFROM_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'text',
			'data' =&gt; 'str',
			'validate' =&gt; 'regex',
			'rule' =&gt; '#^[\w]+$#i'
		),
		'birthday_emailaddr' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_EMAILFROMADDR,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_EMAILFROMADDR_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'email',
			'data' =&gt; 'str'
		),
		'birthday_lastemail' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_TIME,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_TIME_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'datestamp',
			'data' =&gt; 'int'
		),
		'birthday_sendpm' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_PM,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_PM_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'boolean',
			'data' =&gt; 'int'
		),
		'birthday_pmfrom' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_PMUSER,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_PMUSER_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'user',
			'data' =&gt; 'str',
		),
		'birthday_showclass' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_MENU,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_MENU_HELP,
			'tab'=&gt;1,
			'type'=&gt;'userclass',
			'data'=&gt;'int',
			'writeParms'=&gt; 'default=254&amp;classlist=public,member,main,nobody,admin,classes,no-excludes'
		),
		'birthday_includeclass' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_INCLUDE,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_INCLUDE_HELP,
			'tab'=&gt;1,
			'type'=&gt;'userclass',
			'data'=&gt;'int',
			'writeParms'=&gt; 'default=0&amp;classlist=main,public,nobody,admin,classes,no-excludes'
		),
		'birthday_excludeclass' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_EXCLUDE,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_EXCLUDE_HELP,
			'tab'=&gt;1,
			'type'=&gt;'userclass',
			'data'=&gt;'int',
			'writeParms'=&gt;'default=255&amp;classlist=main,nobody,admin,classes,no-excludes'
		),
		'birthday_statsclass' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_STATS,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_STATS_HELP,
			'tab'=&gt;1,
			'type'=&gt;'userclass',
			'data'=&gt;'int',
			'writeParms'=&gt;'default=255&amp;classlist=main,public,nobody,admin,classes,no-excludes'
		),
		'birthday_usecss' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_CSS,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_CSS_HELP,
			'tab'=&gt;2,
			'type' =&gt; 'boolean',
			'data' =&gt; 'int'
		),
		'birthday_showAvatar' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_AVATAR,
			'help'=&gt;LAN_PLUGIN__BIRTHDAY_ADMIN_AVATAR_HELP,
			'tab'=&gt;0,
			'type' =&gt; 'boolean',
			'data' =&gt; 'int'
		),
		'birthday_avwidth' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_WIDTH,
			'help' =&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_WIDTH_HELP,
			'tab'=&gt;0,
			'type'=&gt;'number',
			'data' =&gt; 'int',
			'writeParms'=&gt;array(
				'min'=&gt;'1',
				'max'=&gt;'20'
			)
		),
		'birthday_greeting' =&gt; array(
			'title'=&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_CONTENT,
			'help' =&gt; LAN_PLUGIN__BIRTHDAY_ADMIN_CONTENT_HELP,
			'tab'=&gt;3,
			'type'=&gt;'textarea',
			'data' =&gt; 'str',
		)
	);

	public function init()
	{
	}
}

new plugin_birthday_admin();

require_once(e_ADMIN."auth.php");
e107::getAdminUI()-&gt;runPage(); // Send page content
require_once(e_ADMIN."footer.php");













/*

require_once("../../class2.php");
if (!defined('e107_INIT'))
{
    exit;
}
if (!getperms("P"))
{
    header("location:" . e_BASE . "index.php");
    exit;
}
include_lan(e_PLUGIN . "birthday/languages/" . e_LANGUAGE . "_birthday_mnu.php");

require_once(e_ADMIN . "auth.php");
if (!defined("ADMIN_WIDTH"))
{
    define(ADMIN_WIDTH, "width:100%;");
}
require_once(e_HANDLER . "userclass_class.php");

$caption = BIRTHDAY_LAN_2;
if (e_QUERY == "update")
{
    $pref['birthday_dformat'] = intval($_POST['birthday_dformat']);
    $pref['sendEmail'] = $tp-&gt;toDB($_POST['sendEmail']);
    $pref['showAge'] = $tp-&gt;toDB($_POST['showAge']);
    $pref['birthday_showdate'] = intval($_POST['birthday_showdate']);
    $pref['birthday_numdue'] = $tp-&gt;toDB($_POST['birthday_numdue']);
    $pref['birthday_emailfrom'] = $tp-&gt;toDB($_POST['birthday_emailfrom']);
    $pref['birthday_greeting'] = $tp-&gt;toDB($_POST['birthday_greeting']);
    $pref['birthday_subject'] = $tp-&gt;toDB($_POST['birthday_subject']);
    $pref['birthday_emailaddr'] = $tp-&gt;toDB($_POST['birthday_emailaddr']);
    $pref['birthday_showclass'] = $tp-&gt;toDB($_POST['birthday_showclass']);
    $pref['birthday_avwidth'] = intval($_POST['birthday_avwidth']);
    $pref['birthday_pmfrom'] = intval($_POST['birthday_pmfrom']);
    $pref['birthday_usepm'] = intval($_POST['birthday_usepm']);
    $pref['birthday_usecss'] = intval($_POST['birthday_usecss']);
    $pref['birthday_include'] = intval($_POST['birthday_include']);
    $pref['birthday_exclude'] = intval($_POST['birthday_exclude']);
    $pref['showAvatar'] = intval($_POST['showAvatar']);
    $pref['birthday_demographic'] = intval($_POST['birthday_demographic']);
    save_prefs();
     $e107cache-&gt;clear("nq_bdaymenu");
    $birthday_msg =  BIRTHDAY_ADMIN_A5;
}

$text .= "
&lt;form method='post' action='" . e_SELF . "?update' id='confbday'&gt;
	&lt;table style='" . ADMIN_WIDTH . "' class='fborder' &gt;";
$text .= "
		&lt;tr&gt;
			&lt;td class='fcaption' colspan='2'&gt;" . BIRTHDAY_ADMIN_A1 . "&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td class='forumheader2' colspan='2'&gt;&lt;b&gt;" . $birthday_msg . "&lt;/b&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A2 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'text' class = 'tbox' name = 'birthday_numdue' value = '" . $tp-&gt;toFORM($pref['birthday_numdue']) . "' /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A12 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'checkbox' class = 'tbox' name = 'showAge' value = '1' ".($pref['showAge'] == "1"?" checked='checked' ":"")." /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A51 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'checkbox' class = 'tbox' name = 'showAvatar' value = '1' ".($pref['showAvatar'] == "1"?" checked='checked' ":"")." /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;

		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A52 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'text' size='8' class = 'tbox' name = 'birthday_avwidth' value = '" . $tp-&gt;toFORM($pref['birthday_avwidth']) . "' /&gt; px
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A64 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;" . r_userclass("birthday_demographic", $pref['birthday_demographic'], "off", 'public,nobody,member,admin, classes') . "&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A50 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'checkbox' class = 'tbox' name = 'birthday_showdate' value = '1' ".($pref['birthday_showdate'] == "1"? " checked='checked' ":"")." /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A4 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;select name='birthday_dformat' class='tbox'&gt;
					&lt;option value='0' ".($pref['birthday_dformat']==0?"selected='selected'":"")." &gt;d M&lt;/option&gt;
					&lt;option value='1' ".($pref['birthday_dformat']==1?"selected='selected'":"")." &gt;d M Y&lt;/option&gt;
					&lt;option value='2' ".($pref['birthday_dformat']==2?"selected='selected'":"")." &gt;M d&lt;/option&gt;
					&lt;option value='3' ".($pref['birthday_dformat']==3?"selected='selected'":"")." &gt;M d Y&lt;/option&gt;
					&lt;option value='4' ".($pref['birthday_dformat']==4?"selected='selected'":"")." &gt;Y M d&lt;/option&gt;

					&lt;option value='5' ".($pref['birthday_dformat']==5?"selected='selected'":"")." &gt;d mmm Y&lt;/option&gt;
					&lt;option value='6' ".($pref['birthday_dformat']==6?"selected='selected'":"")." &gt;d MMM Y&lt;/option&gt;
					&lt;option value='7' ".($pref['birthday_dformat']==7?"selected='selected'":"")." &gt;mmm d Y&lt;/option&gt;
					&lt;option value='8' ".($pref['birthday_dformat']==8?"selected='selected'":"")." &gt;MMM d Y&lt;/option&gt;

					&lt;option value='9' ".($pref['birthday_dformat']==9?"selected='selected'":"")." &gt;dth mmm Y&lt;/option&gt;
					&lt;option value='10' ".($pref['birthday_dformat']==10?"selected='selected'":"")." &gt;dth MMM Y&lt;/option&gt;
					&lt;option value='11' ".($pref['birthday_dformat']==11?"selected='selected'":"")." &gt;mmm dth Y&lt;/option&gt;
					&lt;option value='12' ".($pref['birthday_dformat']==12?"selected='selected'":"")." &gt;MMM dth Y&lt;/option&gt;

					&lt;option value='13' ".($pref['birthday_dformat']==13?"selected='selected'":"")." &gt;d mmm &lt;/option&gt;
					&lt;option value='14' ".($pref['birthday_dformat']==14?"selected='selected'":"")." &gt;d MMM &lt;/option&gt;
					&lt;option value='15' ".($pref['birthday_dformat']==15?"selected='selected'":"")." &gt;mmm d &lt;/option&gt;
					&lt;option value='16' ".($pref['birthday_dformat']==16?"selected='selected'":"")." &gt;MMM d &lt;/option&gt;

					&lt;option value='17' ".($pref['birthday_dformat']==17?"selected='selected'":"")." &gt;dth mmm &lt;/option&gt;
					&lt;option value='18' ".($pref['birthday_dformat']==18?"selected='selected'":"")." &gt;dth MMM &lt;/option&gt;
					&lt;option value='19' ".($pref['birthday_dformat']==19?"selected='selected'":"")." &gt;mmm dth &lt;/option&gt;
					&lt;option value='20' ".($pref['birthday_dformat']==20?"selected='selected'":"")." &gt;MMM dth &lt;/option&gt;
		 		&lt;/select&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A8 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'checkbox' class = 'tbox' name = 'sendEmail' value = '1' ".($pref['sendEmail'] == "1"?" checked='checked' ":"")." /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A7 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'text' size='30' class = 'tbox' name = 'birthday_emailfrom' value = '" . $tp-&gt;toFORM($pref['birthday_emailfrom']) . "' /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A10 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'text' size='30' class = 'tbox' name = 'birthday_subject' value = '" . $tp-&gt;toFORM($pref['birthday_subject']) . "' /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A11 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;input type = 'text' size='30' class = 'tbox' name = 'birthday_emailaddr' value = '" . $tp-&gt;toFORM($pref['birthday_emailaddr']) . "' /&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td  style='width:30%;vertical-align:top;' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A9 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;textarea class = 'tbox' name = 'birthday_greeting' rows='6' cols='70' &gt;" . $tp-&gt;toFORM($pref['birthday_greeting']) . "&lt;/textarea&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A35 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;" . r_userclass("birthday_showclass", $pref['birthday_showclass'], "off", 'public,nobody,member,admin, classes') . "&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A41 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;" . r_userclass("birthday_exclude", $pref['birthday_exclude'], "off", "nobody,admin,classes") . "&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A40 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;&lt;input type='checkbox' class='tbox' value='1' name='birthday_usecss' " . ($pref['birthday_usecss'] &gt; 0?"checked='checked'":"") . " /&gt;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A38 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;&lt;input type='checkbox' class='tbox' value='1' name='birthday_usepm' " . ($pref['birthday_usepm'] &gt; 0?"checked='checked'":"") . " /&gt;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td style='width:30%' class='forumheader3'&gt;" . BIRTHDAY_ADMIN_A39 . "&lt;/td&gt;
			&lt;td style='width:70%' class='forumheader3'&gt;
				&lt;select class='tbox' name='birthday_pmfrom'&gt;";
// Sort out admin/main admin class in selection
if ($sql-&gt;db_Select("user", "user_id,user_name", "nowhere", false))
{
    while ($autoassign_row = $sql-&gt;db_Fetch())
    {
        extract($autoassign_row);
        $text .= "&lt;option value='$user_id' " . ($user_id == $pref['birthday_pmfrom']?"selected='selected'":"") . "&gt;" . $tp-&gt;toFORM($user_name) . "&lt;/option&gt;";
    } // while
}
else
{
    $text .= "&lt;option value='0' &gt;Select admin class and save first&lt;/option&gt;";
}
// Submit button
$text .= "
				&lt;/select&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td class='forumheader2' colspan='2' style='text-align:left;'&gt;&lt;input type='submit' name='update' value='" . BIRTHDAY_ADMIN_A3 . "' class='button' /&gt;&lt;/td&gt;
		&lt;/tr&gt;
		&lt;tr&gt;
			&lt;td class='fcaption' colspan='2'&gt;&amp;nbsp;&lt;/td&gt;
		&lt;/tr&gt;
	&lt;/table&gt;
&lt;/form&gt;";
$ns-&gt;tablerender($caption, $text);
require_once(e_ADMIN . "footer.php");
*/</data><childs/></node></childs></node></childs></node><node name="HTML/XHTML" isFolder="True" hlType=""><data></data><childs/></node><node name="XML" isFolder="True" hlType=""><data></data><childs/></node><node name="CSS" isFolder="True" hlType=""><data></data><childs/></node><node name="SMARTY" isFolder="True" hlType=""><data></data><childs/></node><node name="JAVASCRIPT" isFolder="True" hlType=""><data></data><childs/></node><node name="VBSCRIPT" isFolder="True" hlType=""><data></data><childs/></node><node name="SQL" isFolder="True" hlType=""><data></data><childs/></node><node name="PERL" isFolder="True" hlType=""><data></data><childs/></node><node name="JAVA" isFolder="True" hlType=""><data></data><childs/></node><node name="C#" isFolder="True" hlType=""><data></data><childs/></node><node name="PYTHON" isFolder="True" hlType=""><data></data><childs/></node><node name="RUBY" isFolder="True" hlType=""><data></data><childs/></node></childs></codeTemplates>
